<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="Assets/style.css" rel="stylesheet" />
        <title>All users</title>
    </head>
    <body>
        <div id="maincontent"></div>
        <h1> All Users</h1>
           <table id="table">
        </table>
        
        <script>
            var url = "https://jsonplaceholder.typicode.com/users";
            // send AJAX request
            var req = new XMLHttpRequest();
            req.open("GET",url);
            //send request
            req.send(); 
            
            var main = document.getElementById("maincontent");
	
            //create table when response is returned
            req.onload = function() {
                  var users=JSON.parse(req.response);
                  if(users!=null)
                  {
                    generateHTMLTable(users);
                  }
                  
                  else
                  {
                     main.innerHTML = "Not working";
                  }
                
                }
            
        function generateHTMLTable(data) {
	var str = " <tr><th>Name</th><th>Username</th><th>Email</th>";
	for(var row=0; row<data.length; row++) {
		     str += "<tr>"; // create row
		     str += "<td>" + data[row].name + "</td>";
                    str += "<td><a href=user_details.html?user_id="+data[row].id+">"+data[row].username + "</a></td>";
                    str += "<td>" + data[row].email + "</td>";
		    str += "</tr>"; // 
	}
	
	//inserts row in table
	var table = document.getElementById("table");
	table.innerHTML = str;
}  
        </script>
    
    </body>
</html>
